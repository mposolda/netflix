<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:a4j="http://richfaces.org/a4j"
                template="/pages/template.xhtml"
                xmlns:rich="http://richfaces.org/rich">

    <ui:define name="content">
      <a4j:outputPanel id="mainNetflixPanel">
        <rich:tabPanel selectedTab="#{netflix.selectedTab}" switchType="ajax">
            <rich:tab label="#{netflix.moviesTabText}" name="#{netflix.moviesTabText}">
                <h:form>
                    <rich:panel header="Search for movies, TV shows" headerClass="netflixHeader">
                        <img src="#{facesContext.externalContext.requestContextPath}/images/system-search.png" alt="search icon" class="icon"/>
                        <h:outputText value="Movie / TV show name: " />
                        <h:inputText size="50" value="#{netflix.currentMovieName}"/>						
						<a4j:commandButton id="mvoie_detail_submit"
								action="#{netflix.searchForMovie}" value="Search"
								reRender="movieSearchResults" 
								status="movieSearchButtonStatus" />
                    </rich:panel>
                    <div style="background-color: red;" ><h:messages /></div>
                </h:form>     

				<a4j:status id="movieSearchButtonStatus" forceId="true">
                	<f:facet name="start">
                		<a4j:outputPanel layout="block" style="text-align: center;">
                    		<h:graphicImage  value="/images/loading2.gif" style="width: 80px;" />
                    	</a4j:outputPanel>
                	</f:facet>					
                	<f:facet name="stop">
						<rich:panel id="movieSearchResults">
                			
                			<!-- Table with searched movies -->                
                			<ui:include src="/pages/includes/movieSearch.xhtml" />                

                			<!-- Detail of the movie -->
                			<ui:include src="/pages/includes/movieDetail.xhtml" />                		
                		</rich:panel>                	
                	</f:facet>
				</a4j:status>
				
            </rich:tab>

            <rich:tab label="#{netflix.peopleTabText}" name="#{netflix.peopleTabText}">

                <h:form>
                    <rich:panel header="Search for actors, directors"  headerClass="netflixHeader" >
                                <img src="#{facesContext.externalContext.requestContextPath}/images/system-search.png" alt="search icon" class="icon"/>
                                <h:outputText value="Actor / director name: " />
                        <h:inputText size="50" value="#{netflix.currentStarName}"/>
						<a4j:commandButton id="peopleSearchSubmit"
								action="#{netflix.searchForStar}" value="Search"
								reRender="peopleSearchResults" 
								status="peopleSearchButtonStatus" />
                    </rich:panel>
                    <div style="background-color: red;" ><h:messages /></div>
                </h:form>

				<a4j:status id="peopleSearchButtonStatus" forceId="true">
                	<f:facet name="start">
                		<a4j:outputPanel layout="block" style="text-align: center;">
                    		<h:graphicImage  value="/images/loading2.gif" style="width: 80px;" />
                    	</a4j:outputPanel>
                	</f:facet>					
                	<f:facet name="stop">
						<rich:panel id="peopleSearchResults">
               				
               				 <!-- Table with searched people -->
                			 <ui:include src="/pages/includes/personSearch.xhtml" />

                			 <!-- Detail of person (actor, director) -->
                			 <ui:include src="/pages/includes/personDetail.xhtml" />            		
                		</rich:panel>                	
                	</f:facet>
				</a4j:status>
				
            </rich:tab>

        </rich:tabPanel>
	  </a4j:outputPanel>
    </ui:define>
</ui:composition>
